name: Daily News Summary  

on:  
  schedule:  
    - cron: '0 12 * * *'  # Runs every day at 12 PM UTC  
  workflow_dispatch:  # Allows manual triggering  

jobs:  
  fetch-news:  
    runs-on: ubuntu-latest  

    steps:  
      - name: Checkout Repository  
        uses: actions/checkout@v3  

      - name: Set up Python  
        uses: actions/setup-python@v4  
        with:  
          python-version: '3.9'  # Uses the latest Python 3 version  

      - name: Install dependencies  
        run: |  
          pip install requests  # Install requests module  

      - name: Fetch Latest News  
        run: |  
          python fetch_news.py  # Run your script  

      - name: Commit and Push Changes  
        env:  
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  
        run: |  
          git config --global user.name "github-actions"  
          git config --global user.email "github-actions@github.com"  
          git pull --rebase origin main  
          git add .  
          git commit -m "Automated daily news summary update" || echo "No changes to commit"  
          git push https://x-access-token:${GITHUB_TOKEN}@github.com/blbenton/daily-news-brief.git main  
